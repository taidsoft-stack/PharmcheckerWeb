name: Drug Sync - Monthly Full

on:
  schedule:
    # 매월 1일 02:00 ~ 23:50 KST
    - cron: "*/10 17-23 1 * *"  # UTC 17~23 = KST 02~08
    - cron: "*/10 0-14 1 * *"   # UTC 00~14 = KST 09~23

  workflow_dispatch:

jobs:
  sync:
    runs-on: ubuntu-latest

    steps:
      - name: Call Supabase Edge Function (full)
        run: |
          curl -X POST "${{ secrets.SUPABASE_FUNCTION_URL }}?mode=full" \
            -H "Authorization: Bearer ${{ secrets.SUPABASE_ANON_KEY }}"
