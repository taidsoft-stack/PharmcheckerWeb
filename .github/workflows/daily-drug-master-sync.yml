name: Daily Drug Master Sync

on:
  schedule:
    # 매일 01:00 KST = 16:00 UTC
    - cron: "*/10 16-23 * * *"   # 16:00 ~ 23:59 UTC (01:00~08:59 KST)
    - cron: "*/10 0-15 * * *"    # 00:00 ~ 15:59 UTC (09:00~00:59 KST)

  # GitHub 웹 화면에서 수동 실행 가능
  workflow_dispatch:

jobs:
  sync:
    runs-on: ubuntu-latest

    steps:
      - name: Call Supabase Edge Function (daily_drug_master_sync)
        run: |
          curl -X POST "${{ secrets.SUPABASE_FUNCTION_URL }}" \
            -H "Authorization: Bearer ${{ secrets.SUPABASE_ANON_KEY }}" \
            -H "Content-Type: application/json"
